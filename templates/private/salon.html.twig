{% extends 'private/base.html.twig' %}

{% trans_default_domain 'front_salon' %}

{% block title %}{{ 'title'|trans }}{% endblock %}

{% block body %}
    {% if is_granted('ROLE_PRIVATE') %}
        <div class="front-block display-message">
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="{{ salon.getName() }}" role="tabpanel" aria-labelledby="{{ salon.getName() }}-tab">
                    <div class="chat-defil">
                        <table class="table table-striped table-bordered table-dark">
                            <tbody class="messagesPost">
                            {% for message in salon.getContents() %}
                                <tr>
                                    <th class="tab-cells-name">
                                        <div>
                                            <span{% if message.getUser() == app.user %} class="text-vert"{% endif %}>{{ message.getUser().getUserName() }}</span> :  <span class="ml-2">{{ message.getMessage()|raw }}</span>
                                        </div>
                                    </th>
                                    <th width="125px" class="tab-cells-name cell-middle">
                                        <div>
                                            {{ message.getSendAt()|date('H:i:s  d/m/Y') }}
                                        </div>
                                    </th>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {% set action = path('private_salon') %}
                    {{ form_start(form_message,{attr: { action: action }}) }}
                    <div class="row">
                        <div class="col-10">
                            {{ form_widget(form_message.content) }}
                        </div>
                        <div class="col-2 float-left">
                            {{ form_widget(form_message.sendForm) }}
                        </div>
                    </div>
                    {{ form_end(form_message) }}
                </div>
            </div>
        </div>
    {% endif %}
    <div class="text-center"><a class="logout-private" href="{{ path('logout') }}">{{ 'logout'|trans }}</a></div>
{% endblock %}
