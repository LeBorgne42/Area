{% extends 'base.html.twig' %}

{% trans_default_domain 'front_report' %}

{% block title %}{{ 'title'|trans }}{% endblock %}

{% block body %}
    <div class="front-block">
        {% if app.user.getTutorial() == 2 or app.user.getTutorial() == 22 %}
            <table class="table table-striped borderOverview tutorial">
                <tbody>
                <tr>
                    <th class="tab-cells-name p-3 tutorial">
                        <div class="row">
                            <div class="col-12 py-1">
                                {% if app.user.getTutorial() == 2 %}{{ 'report.tutorial'|trans|raw }}{% elseif app.user.getTutorial() == 22  %}{{ 'report.tutorialBis'|trans|raw }}{% endif %}
                            </div>
                        </div>
                    </th>
                </tr>
                </tbody>
            </table>
        {% endif %}
        <div class="front-block-game report">
            <div class="float-right mb-3"><a class="btn-read-all" href="{{ path('report_all_view', {'idp': usePlanet.getId()}) }}">{{ 'AllNewView'|trans }}</a></div>
            <ul class="nav nav-tabs mt-1" id="myTab" role="tablist">
                <li class="nav-item">
                    <a{% if reportPage == 'defaut' %} class="py-2 nav-link active"{% endif %} href="{{ path('report_id', {'idp': usePlanet.getId(), 'id': 'defaut'}) }}" >{{ 'report.defaut'|trans }} {% if app.user.getWhichViewsReport('defaut') %}<span class="text-vert">{{ app.user.getWhichViewsReport('defaut') }}</span>{% endif %}</a>
                </li>
                <li class="nav-item">
                    <a{% if reportPage == 'zombie' %} class="py-2 nav-link active"{% endif %} href="{{ path('report_id', {'idp': usePlanet.getId(), 'id': 'zombie'}) }}" >{{ 'report.zombie'|trans }} {% if app.user.getWhichViewsReport('zombie') %}<span class="text-vert">{{ app.user.getWhichViewsReport('zombie') }}</span>{% endif %}</a>
                </li>
                <li class="nav-item">
                    <a{% if reportPage == 'fight' %} class="py-2 nav-link active"{% endif %} href="{{ path('report_id', {'idp': usePlanet.getId(), 'id': 'fight'}) }}" >{{ 'report.fight'|trans }} {% if app.user.getWhichViewsReport('fight') %}<span class="text-vert">{{ app.user.getWhichViewsReport('fight') }}</span>{% endif %}</a>
                </li>
                <li class="nav-item">
                    <a{% if reportPage == 'invade' %} class="py-2 nav-link active"{% endif %} href="{{ path('report_id', {'idp': usePlanet.getId(), 'id': 'invade'}) }}" >{{ 'report.invade'|trans }} {% if app.user.getWhichViewsReport('invade') %}<span class="text-vert">{{ app.user.getWhichViewsReport('invade') }}</span>{% endif %}</a>
                </li>
                <li class="nav-item">
                    <a{% if reportPage == 'economic' %} class="py-2 nav-link active"{% endif %} href="{{ path('report_id', {'idp': usePlanet.getId(), 'id': 'economic'}) }}" >{{ 'report.economic'|trans }} {% if app.user.getWhichViewsReport('economic') %}<span class="text-vert">{{ app.user.getWhichViewsReport('economic') }}</span>{% endif %}</a>
                </li>
                <li class="nav-item">
                    <a{% if reportPage == 'move' %} class="py-2 nav-link active"{% endif %} href="{{ path('report_id', {'idp': usePlanet.getId(), 'id': 'move'}) }}" >{{ 'report.move'|trans }} {% if app.user.getWhichViewsReport('move') %}<span class="text-vert">{{ app.user.getWhichViewsReport('move') }}</span>{% endif %}</a>
                </li>
            </ul>
            {% for report in reports %}
                <table class="table table-striped table-bordered table-dark">
                    <tbody>
                    <tr>
                        <th class="tab-cells-name">
                            {% if report.getImageName() %}<span><img class="border-dashed-img" src="{{ vich_uploader_asset(report, 'imageFile') }}"></span>{% endif %}<span class="ml-3{% if report.getTitle() == 'Rapport de combat : DÃ©faite' %} text-rouge{% elseif report.getTitle() == 'Rapport de combat : Victoire' %} text-vert{% endif %}">{{ report.getTitle() }}</span>
                            <span class="float-right">
                                <div>
                                    {{ report.sendAt|date('Y/m/d H:i:s') }}
                                </div>
                                <div class="mt-3">
                                    {% if report.getNewReport() == 1 %}<a class="btn-new" href="{{ path('report_view', {'idp': usePlanet.getId(), 'id': report.getId()}) }}">{{ 'newReport'|trans }}</a>{% endif %}
                                    <a class="btn-delete" href="{{ path('report_delete', {'idp': usePlanet.getId(), 'id': report.getId()}) }}">{{ 'deleteReport'|trans }}</a>
                                </div>
                            </span>
                        </th>
                    </tr>
                    <tr>
                        <th colspan="2" class="tab-cells-name">
                            <div class="p-3">
                                {{ report.getContent()|raw }}
                            </div>
                        </th>
                    </tr>
                    <tr>
                        <th colspan="2" class="tab-cells-name">
                            <div class="p-1">{% if report.getShareKey() %}<a class="p-1" href="{{ path('report_share_display', {'id': report.getShareKey()}) }}" target="_blank">https://www.areauniverse.eu/connect/rapport/share/{{ report.getShareKey() }}</a>{% endif %}<a class="confirm-button btn-sm" href="{{ path('report_share', {'idp': usePlanet.getId(), 'id': report.getId()}) }}">{{ 'share'|trans }}</a></div>
                        </th>
                    </tr>
                    </tbody>
                </table>
                <div class="text-orange text-center my-3"><span class="glyphicon glyphicon-stop"></span></div>
            {% endfor %}
        </div>
    </div>
    <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
            <div class="modal-content special">
            </div>
        </div>
    </div>
{% endblock %}
