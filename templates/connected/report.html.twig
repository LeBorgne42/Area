{% extends 'base.html.twig' %}

{% trans_default_domain 'front_report' %}

{% block title %}{{ 'title'|trans }}{% endblock %}

{% block body %}
    <div class="front-block">
        {% if app.user.getTutorial() == 2 %}
            <table class="table table-striped borderOverview tutorial">
                <tbody>
                <tr>
                    <th class="tab-cells-name p-3 tutorial">
                        <div class="row">
                            <div class="col-12 py-1">
                                {{ 'report.tutorial'|trans|raw }}
                            </div>
                        </div>
                    </th>
                </tr>
                </tbody>
            </table>
        {% endif %}
        <div class="front-block-ally report">
            <div class="float-right mb-3"><a class="btn-read-all" href="{{ path('report_all_view', {'idp': usePlanet.getId()}) }}">{{ 'AllNewView'|trans }}</a></div>
            {% for report in reports %}
                <table class="table table-striped table-bordered table-dark">
                    <tbody>
                    <tr>
                        <th class="tab-cells-name">
                            {% if report.getImageName() %}<span><img class="border-dashed-img" src="{{ vich_uploader_asset(report, 'imageFile') }}"></span>{% endif %}<span class="ml-3{% if report.getTitle() == 'Rapport de combat : DÃ©faite' %} text-rouge{% elseif report.getTitle() == 'Rapport de combat : Victoire' %} text-vert{% endif %}">{{ report.getTitle() }}</span>
                            <span class="float-right">
                                <div>
                                    {{ report.sendAt|date('Y/m/d H:i:s') }}
                                </div>
                                <div class="mt-3">
                                    {% if report.getNewReport() == true %}<a class="btn-new" href="{{ path('report_view', {'idp': usePlanet.getId(), 'id': report.getId()}) }}">{{ 'newReport'|trans }}</a>{% endif %}
                                    <a class="btn-delete" href="{{ path('report_delete', {'idp': usePlanet.getId(), 'id': report.getId()}) }}">{{ 'deleteReport'|trans }}</a>
                                </div>
                            </span>
                        </th>
                    </tr>
                    <tr>
                        <th colspan="2" class="tab-cells-name">
                            <div class="p-3">
                                {{ report.getContent()|raw }}
                            </div>
                        </th>
                    </tr>
                    <tr>
                        <th colspan="2" class="tab-cells-name">
                            <div class="p-1">{% if report.getShareKey() %}<a class="p-1" href="{{ path('report_share_display', {'id': report.getShareKey()}) }}" target="_blank">https://www.areauniverse.eu/connect/rapport/share/{{ report.getShareKey() }}</a>{% endif %}<a class="confirm-button btn-sm" href="{{ path('report_share', {'idp': usePlanet.getId(), 'id': report.getId()}) }}">{{ 'share'|trans }}</a></div>
                        </th>
                    </tr>
                    </tbody>
                </table>
                <div class="text-orange text-center my-3"><span class="glyphicon glyphicon-stop"></span></div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
