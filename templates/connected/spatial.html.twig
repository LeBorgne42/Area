{% extends 'base.html.twig' %}

{% trans_default_domain 'front_spatial' %}

{% block title %}{{ 'title'|trans }}{% endblock %}

{% block body %}
    <div class="front-block spatial">
        {% if usePlanet.getSpaceShip == 1 %}
            {{ form_start(form_spatialShip) }}
            <div class="block-title"><h2>{{ 'spatial.constructShip'|trans }}</h2></div>
            <table class="table table-striped table-bordered table-dark">
                <tbody>
                <tr>
                    <th class="tab-cells-name">
                        {{ 'spatial.sonde'|trans }} x {{ usePlanet.getSonde()|number_format }} <span class="float-right"><span class="ml-5">5 <img data-toggle="tooltip" data-placement="bottom" title="{{ 'niobiumImg'|trans }}" src="{{ asset('img/niobium.png') }}"></span></span>
                    </th>
                    <td class="center-cells">
                        {{ form_widget(form_spatialShip.sonde,{attr: { max: usePlanet.getSonde()}}) }}
                    </td>
                </tr>
                <tr{% if app.user.getTerraformation() == 0 %} hidden{% endif %}>
                    <th class="tab-cells-name">
                        {{ 'spatial.colonizer'|trans }} x {{ usePlanet.getColonizer()|number_format }} <span class="float-right"><span class="ml-5">20.000 <img data-toggle="tooltip" data-placement="bottom" title="{{ 'niobiumImg'|trans }}" src="{{ asset('img/niobium.png') }}"></span> <span class="ml-3">12.000 <img data-toggle="tooltip" data-placement="bottom" title="{{ 'waterImg'|trans }}" src="{{ asset('img/water.png') }}"></span> <span class="ml-3">2.500 <img data-toggle="tooltip" data-placement="bottom" title="{{ 'workerImg'|trans }}" src="{{ asset('img/worker.png') }}"></span></span>
                    </th>
                    <td class="center-cells">
                        {{ form_widget(form_spatialShip.colonizer,{attr: { max: usePlanet.getColonizer()}}) }}
                    </td>
                </tr>
                <tr{% if app.user.getRecycleur() == 0 %} hidden{% endif %}>
                    <th class="tab-cells-name">
                        {{ 'spatial.recycleur'|trans }} x {{ usePlanet.getRecycleur()|number_format }} <span class="float-right"><span class="ml-5">10.000 <img data-toggle="tooltip" data-placement="bottom" title="{{ 'niobiumImg'|trans }}" src="{{ asset('img/niobium.png') }}"></span> <span class="ml-3">7.000 <img data-toggle="tooltip" data-placement="bottom" title="{{ 'waterImg'|trans }}" src="{{ asset('img/water.png') }}"></span></span>
                    </th>
                    <td class="center-cells">
                        {{ form_widget(form_spatialShip.recycleur,{attr: { max: usePlanet.getRecycleur()}}) }}
                    </td>
                </tr>
                <tr{% if app.user.getIndustry() < 0 or app.user.getMissile() == 0 %} hidden{% endif %}>
                    <th class="tab-cells-name">
                        {{ 'spatial.hunter'|trans }} x {{ usePlanet.getHunter()|number_format }} <span class="float-right"><span class="ml-5">25 <img data-toggle="tooltip" data-placement="bottom" title="{{ 'niobiumImg'|trans }}" src="{{ asset('img/niobium.png') }}"></span> <span class="ml-3">5 <img data-toggle="tooltip" data-placement="bottom" title="{{ 'waterImg'|trans }}" src="{{ asset('img/water.png') }}"></span></span>
                    </th>
                    <td class="center-cells">
                        {{ form_widget(form_spatialShip.hunter,{attr: { max: usePlanet.getHunter()}}) }}
                    </td>
                </tr>
                <tr{% if usePlanet.getHeavyUsine() == 0 or app.user.getMissile() < 2 or app.user.getLaser() == 0 %} hidden{% endif %}>
                    <th class="tab-cells-name">
                        {{ 'spatial.fregate'|trans }} x {{ usePlanet.getFregate()|number_format }} <span class="float-right"><span class="ml-5">300 <img data-toggle="tooltip" data-placement="bottom" title="{{ 'niobiumImg'|trans }}" src="{{ asset('img/niobium.png') }}"></span> <span class="ml-3">200 <img data-toggle="tooltip" data-placement="bottom" title="{{ 'waterImg'|trans }}" src="{{ asset('img/water.png') }}"></span></span>
                    </th>
                    <td class="center-cells">
                        {{ form_widget(form_spatialShip.fregate,{attr: { max: usePlanet.getFregate()}}) }}
                    </td>
                </tr>
                <tr{% if app.user.getBarge() == 0 %} hidden{% endif %}>
                    <th class="tab-cells-name">
                        {{ 'spatial.barge'|trans }} x {{ usePlanet.getBarge()|number_format }} <span class="float-right"><span class="ml-5">15.000 <img data-toggle="tooltip" data-placement="bottom" title="{{ 'niobiumImg'|trans }}" src="{{ asset('img/niobium.png') }}"></span> <span class="ml-3">12.000 <img data-toggle="tooltip" data-placement="bottom" title="{{ 'waterImg'|trans }}" src="{{ asset('img/water.png') }}"></span></span>
                    </th>
                    <td class="center-cells">
                        {{ form_widget(form_spatialShip.barge,{attr: { max: usePlanet.getBarge()}}) }}
                    </td>
                </tr>
                </tbody>
            </table>
            {{ form_widget(form_spatialShip.sendForm,{attr: { class: 'btn btn-lg btn-info float-right'}}) }}
            {{ form_end(form_spatialShip) }}
        {% endif %}
    </div>
    <div class="front-block build">
        <div class="block-title"><h2>{{ 'spatial.orbiteFlotte'|trans }}</h2></div>
        <table class="table table-striped table-bordered table-dark">
            <tbody>
            <tr>
                <th class="tab-cells-name text-center">
                    {{ 'spatial.fleetName'|trans }}
                </th>
                <td class="center-cells text-center">
                    {{ 'spatial.fleetShips'|trans }}
                </td>
                <th class="tab-cells-name text-center">
                    {{ 'spatial.cargo'|trans }}
                </th>
                <td class="center-cells text-center">
                    {{ 'spatial.fleetSignature'|trans }}
                </td>
            </tr>
            {% for fleet in usePlanet.getFleets() %}
                {% if fleet.getUser() == app.user and fleet.getPlanete() is null %}
                    <tr>
                        <th class="tab-cells-name">
                           "{{  fleet.getName() }}" <span><a class="ml-3 float-right" href="{{ path('destroy_fleet', {'idp': usePlanet.getId(), 'id': fleet.getId()}) }}"><span>{{ 'spatial.destroyFleet'|trans }}</span></a></span><span><a class="ml-3 float-right" href="{{ path('manage_fleet', {'idp': usePlanet.getId(), 'id': fleet.getId() }) }}" data-toggle="modal" data-target="#editModal"><span>{{ 'spatial.seeFlotte'|trans }}</span></a></span>
                        </th>
                        <td class="center-cells text-center">
                            {{ fleet.getNbrShips()|number_format }}
                        </td>
                        <td class="center-cells text-center">
                            {{ fleet.getCargoFull()|number_format }} / {{ fleet.getCargoPlace()|number_format }}
                        </td>
                        <td class="center-cells text-center">
                            {{ fleet.getNbrSignatures()|number_format }}
                        </td>
                    </tr>
                {% endif %}
            {% endfor %}
            </tbody>
        </table>
        {% if usePlanet.getShipOn() > 0 %}<a class="btn btn-lg btn-info float-right mb-2" href="{{ path('create_fleet', {'idp': usePlanet.getId()}) }}" data-toggle="modal" data-target="#createModal"><span>{{ 'spatial.createFlotte'|trans }}</span></a>{% endif %}
    </div>

    <div class="modal fade" id="createModal" tabindex="-1" role="dialog" aria-labelledby="createModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content special">
            </div>
        </div>
    </div>
    <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content special">
            </div>
        </div>
    </div>
{% endblock %}
