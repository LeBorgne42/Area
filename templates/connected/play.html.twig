{% extends 'anonymous/base.html.twig' %}

{% trans_default_domain 'front_universe' %}

{% block title %}{{ 'title'|trans }}{% endblock %}

{% block body %}
    {%- block left_menu -%}
    {%- endblock -%}
    {%- block top_ressource -%}
    {%- endblock -%}
    {%- block right_planet -%}
    {%- endblock -%}
    {%- block footer -%}
    {%- endblock -%}
    <div class="galaxy-select text-center">
        {% for message in app.flashes('full') %}
            <div class="flash-notice mt-5 alerte-flash-error text-center">
                {{ message }}
            </div>
        {% endfor %}
        <div class="mb-5">
            <h1>{{ 'choseGalaxy'|trans }}</h1>
        </div>
        {% for server in servers %}
            <table class="table table-striped table-bordered table-dark text-left">
                <tbody>
                <tr>
                    <td>
                        <span class="mx-5">{{ 'server'|trans }} {{ server.id }}</span>
                        <img class="galaxy-block mr-4 mb-4" src="{{ asset('img/server.png') }}">
                        {% if server.open == 1 %}
                            {{ 'server.open'|trans }}
                        {% else %}
                            {{ 'server.closed'|trans }}
                        {% endif %}
                        {% if server.pvp == 1 %}
                            {{ 'server.pvp'|trans }}
                        {% else %}
                            {{ 'server.pve'|trans }}
                        {% endif %}
                    </td>
                </tr>
                </tbody>
            </table>
            <table class="table table-striped table-bordered table-dark text-left">
                <tbody>
                <tr>
                    {% set x = 1 %}
                    {% for galaxy in galaxys|filter(galaxy => galaxy.server == server.id) %}
                        {% if (x - 1) % 5 == 0 %}
                </tr>
                <tr>
                        {% endif %}
                        <td class="text-center">
                            <a href="{{ path('connect_server', {'id': galaxy.id}) }}"><span><img class="galaxy-block mr-4 mb-4" data-toggle="tooltip" data-placement="top" title="{{ 'tooltip.galaxy'|trans({'%position%': galaxy.position}) }}" src="{{ asset('img/galaxy.png') }}"><span class="galaxy-position">{{ 'galaxy.nbr'|trans({'%position%': galaxy.position}) }}</span><span class="galaxy-players">{{ 'galaxy.players'|trans({'%players%': galaxy.users|number_format }) }}</span></span></a>
                        </td>
                        {% set x = x + 1 %}
                    {% endfor %}
                </tr>
                </tbody>
            </table>
        {% endfor %}
       {# {% for galaxy in galaxys %}
            <a href="{{ path('connect_server', {'id': galaxy.position}) }}"><span><img class="galaxy-block mr-4 mb-4" data-toggle="tooltip" data-placement="top" title="{{ 'tooltip.galaxy'|trans({'%position%': galaxy.position}) }}" src="{{ asset('img/galaxy.png') }}"><span class="galaxy-position">{{ 'galaxy.nbr'|trans({'%position%': galaxy.position}) }}</span><span class="galaxy-players">{{ 'galaxy.players'|trans({'%players%': galaxy.users|number_format }) }}</span></span></a>
        {% endfor %}#}
        <div>
        </div>
    </div>
{% endblock %}
