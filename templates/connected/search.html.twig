{% extends 'base.html.twig' %}

{% trans_default_domain 'front_search' %}

{% block title %}{{ 'title'|trans }}{% endblock %}

{% block body %}
    <div class="front-block">
        {% if app.user.getTutorial() == 8 or app.user.getTutorial() == 9 %}
            <table class="table table-striped borderOverview tutorial">
                <tbody>
                <tr>
                    <th class="tab-cells-name p-3 tutorial">
                        <div class="row">
                            <div class="col-12 py-1">
                                {% if app.user.getTutorial() == 8  %}{{ 'research.tutorial'|trans|raw }}{% elseif app.user.getTutorial() == 9  %}{{ 'research.tutorialBis'|trans|raw }}{% endif %}
                            </div>
                        </div>
                    </th>
                </tr>
                </tbody>
            </table>
        {% endif %}
        <div class="research">
            <div id="timeDefaut" hidden>{{ date|date('Y/m/d H:i:s') }}</div>
            <h1 class="float-right mr-3" data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}">{{ 'bitcoin'|trans }} <span id="bitcoin">{{ app.user.getBitcoin()|number_format }}</span> <img src="{{ asset('img/coin.png') }}"></h1>
            <div class="block-title ml-4 mt-5"><h2>{{ 'research.titleUtility'|trans }}</h2></div>
            <table class="table table-striped table-bordered table-dark text-center">
                <tbody>
                <tr class="{% if app.user.getUtility() == 3 %}finish-search{% else %}access-search{% endif %}">
                    <th class="tab-cells-name">
                        <img class="float-left building-img ml-3" src="{{ asset('img/utility.png') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.utility'|trans|raw }}">{{ 'title.utility'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getUtility()|trans }} / 3</button>
                        {% if app.user.getUtility() != 3 %}<div class="mt-4">{% if (app.user.getUtility() + 1) * 2500 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getUtility() + 1) * 2500)|number_format }}</span>{% else %}{{ ((app.user.getUtility() + 1) * 2500)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                    </th>
                    {% if app.user.getUtility() == 3 %}
                    <td colspan="2" width="101px" class="center-cells cell-middle">
                        <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                    </td>
                    {% else %}
                        <td class="center-cells cell-middle">
                            {{ 'research.utility.desc'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            {% if app.user.getSearch() == 'utility' %}
                                <img width="30" src="{{ asset('img/search.gif') }}">
                                <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                            {% else %}
                                {% if app.user.getBitcoin() >= ((app.user.getUtility() + 1) * 2500) and app.user.getUtility() < 3 and app.user.getSearchAt() < date %}
                                    <div>{% if ((app.user.getUtility() + 1) * app.user.getTimeConstruct(200)) < 3600 %}{{  ((app.user.getUtility() + 1) * app.user.getTimeConstruct(200) - 3600)|date('i:s') }}{% elseif ((app.user.getUtility() + 1) * app.user.getTimeConstruct(200)) < 86400 %}{{  ((app.user.getUtility() + 1) * app.user.getTimeConstruct(200) - 3600- 3600)|date('H:i:s') }}{% else %}{{  ((app.user.getUtility() + 1) * app.user.getTimeConstruct(200) - 3600- 3600)|date('d H:i:s') }}{% endif %}</div>
                                    <a class="btn btn-lg btn-start{% if app.user.getTutorial() == 8 %} tutorial-show{% endif %}" href="{{ path('research_utility', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                {% else %}
                                    <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                {% endif %}
                            {% endif %}
                        {% endif %}
                    </td>
                </tr>
                {% if app.user.getUtility() <= 0 %}
                    <tr class="blocked-search">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" width="40" src="{{ asset('img/terra.png') }}"><button class="text-orange mt-3" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.terra'|trans|raw }}">{{ 'title.terraformation'|trans|raw }}</button>
                        </th>
                        <td class="center-cells cell-middle">
                            {{ 'research.terraformation.blocked'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                        </td>
                    </tr>
                {% else %}
                    <tr class="{% if app.user.getTerraformation() == 18 %}finish-search{% else %}access-search-2{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/terra.png') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.terra'|trans|raw }}">{{ 'title.terraformation'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getTerraformation()|trans }} / 18</button>
                            {% if app.user.getTerraformation() != 18 %}<div class="mt-4">{% if (app.user.getTerraformation() + 1) * 12000 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getTerraformation() + 1) * 12000)|number_format }}</span>{% else %}{{ ((app.user.getTerraformation() + 1) * 12000)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getTerraformation() == 18 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.terraformation.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'terraformation' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>
                                {% else %}
                                    {% if app.user.getBitcoin() >= (app.user.getTerraformation() + 1) * 12000 and app.user.getTerraformation() < 18  and app.user.getUtility() > 0 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getTerraformation() + 1) * app.user.getTimeConstruct(360)) < 3600 %}{{ ((app.user.getTerraformation() + 1) * app.user.getTimeConstruct(360))|date('i:s') }}{% elseif ((app.user.getTerraformation() + 1) * app.user.getTimeConstruct(360)) < 86400 %}{{  ((app.user.getTerraformation() + 1) * app.user.getTimeConstruct(360)- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getTerraformation() + 1) * app.user.getTimeConstruct(360)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_terraformation', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endif %}
                {% if app.user.getUtility() <= 1 %}
                    <tr class="blocked-search">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" width="40" src="{{ asset('img/cargo.png') }}"><button class="text-orange mt-3" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.cargo'|trans|raw }}">{{ 'title.cargo'|trans|raw }}</button>
                        </th>
                        <td class="center-cells cell-middle">
                            {{ 'research.cargo.blocked'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                        </td>
                    </tr>
                {% else %}
                    <tr class="{% if app.user.getCargo() == 5 %}finish-search{% else %}access-search{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/cargo.png') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.cargo'|trans|raw }}">{{ 'title.cargo'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getCargo()|trans }} / 5</button>
                            {% if app.user.getCargo() != 5 %}<div class="mt-4">{% if (app.user.getCargo() + 1) * 3500 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getCargo() + 1) * 3500)|number_format }}</span>{% else %}{{ ((app.user.getCargo() + 1) * 3500)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getCargo() == 5 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.cargo.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'cargo' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getBitcoin() >= ((app.user.getCargo() + 1) * 3500) and app.user.getCargo() < 5  and app.user.getUtility() > 1 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getCargo() + 1) * app.user.getTimeConstruct(400)) < 3600 %}{{ ((app.user.getCargo() + 1) * app.user.getTimeConstruct(400))|date('i:s') }}{% elseif ((app.user.getCargo() + 1) * app.user.getTimeConstruct(400)) < 86400 %}{{  ((app.user.getCargo() + 1) * app.user.getTimeConstruct(400)- 3600)|date('H:i:s') }}{% else %}{{  ((app.user.getCargo() + 1) * app.user.getTimeConstruct(400)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_cargo', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endif %}
                {% if app.user.getUtility() != 3 %}
                    <tr class="blocked-search">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" width="40" src="{{ asset('img/invader.png') }}"><button class="text-orange mt-3" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.barge'|trans|raw }}">{{ 'title.barge'|trans|raw }}</button>
                        </th>
                        <td class="center-cells cell-middle">
                            {{ 'research.barge.blocked'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                        </td>
                    </tr>
                {% else %}
                    <tr class="{% if app.user.getBarge() == 1 %}finish-search{% else %}access-search-2{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/invader.png') }}">{% if app.user.getBarge() == false %}<button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.barge'|trans|raw }}">{{ 'title.barge'|trans|raw }} - {{ 'research.canBe'|trans }}</button>{% else %}{{ 'title.barge'|trans|raw }} - <span class="text-vert">{{ 'research.Activated'|trans }}</span>{% endif %}
                            {% if app.user.getBarge() != 1 %}<div class="mt-4">{% if 35000 > app.user.getBitcoin() %}<span class="text-rouge">35.000</span>{% else %}35.000{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getBarge() == 1 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.barge.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'barge' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getBitcoin() >= 35000 and app.user.getBarge() == 0  and app.user.getUtility() == 3 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getBarge() + 1) * app.user.getTimeConstruct(280)) < 3600 %}{{ ((app.user.getBarge() + 1) * app.user.getTimeConstruct(280))|date('i:s') }}{% elseif ((app.user.getBarge() + 1) * app.user.getTimeConstruct(280)) < 86400 %}{{ ((app.user.getBarge() + 1) * app.user.getTimeConstruct(280)- 3600)|date('H:i:s') }}{% else %}{{  ((app.user.getBarge() + 1) * app.user.getTimeConstruct(280)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_barge', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endif %}
                {% if app.user.getUtility() != 3 %}
                    <tr class="blocked-search">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" width="40" src="{{ asset('img/recyclage.png') }}"><button class="text-orange mt-3" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.recycleur'|trans|raw }}">{{ 'title.recycleur'|trans|raw }}</button>
                        </th>
                        <td class="center-cells cell-middle">
                            {{ 'research.recycleur.blocked'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                        </td>
                    </tr>
                {% else %}
                    <tr class="{% if app.user.getRecycleur() == 1 %}finish-search{% else %}access-search{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/recyclage.png') }}">{% if app.user.getRecycleur() == false %}<button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.recylceur'|trans|raw }}">{{ 'title.recycleur'|trans|raw }} - {{ 'research.canBe'|trans }}</button>{% else %}{{ 'title.recycleur'|trans|raw }} - <span class="text-vert">{{ 'research.Activated'|trans }}</span>{% endif %}
                            {% if app.user.getRecycleur() != 1 %}<div class="mt-4">{% if 16900 > app.user.getBitcoin() %}<span class="text-rouge">16.900</span>{% else %}16.900{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getRecycleur() == 1 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.recycleur.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'recycleur' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getBitcoin() >= 16900 and app.user.getRecycleur() == 0  and app.user.getUtility() == 3 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getRecycleur() + 1) * app.user.getTimeConstruct(400)) < 3600 %}{{ ((app.user.getRecycleur() + 1) * app.user.getTimeConstruct(400))|date('i:s') }}{% elseif ((app.user.getRecycleur() + 1) * app.user.getTimeConstruct(400)) < 86400 %}{{ ((app.user.getRecycleur() + 1) * app.user.getTimeConstruct(400)- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getRecycleur() + 1) * app.user.getTimeConstruct(400)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_recyclage', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endif %}
                <tr class="{% if app.user.getOnde() == 5 %}finish-search{% else %}access-search-2{% endif %}">
                    <th class="tab-cells-name">
                        <img class="float-left building-img ml-3" src="{{ asset('img/scanner.png') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.onde'|trans|raw }}">{{ 'title.onde'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getOnde()|trans }} / 5</button>
                        {% if app.user.getOnde() != 5 %}<div class="mt-4">{% if (app.user.getOnde() + 1) * 2300 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getOnde() + 1) * 2300)|number_format }}</span>{% else %}{{ ((app.user.getOnde() + 1) * 2300)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                    </th>
                    {% if app.user.getOnde() == 5 %}
                        <td colspan="2" width="101px" class="center-cells cell-middle">
                            <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                        </td>
                    {% else %}
                        <td class="center-cells cell-middle">
                            {{ 'research.onde.desc'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            {% if app.user.getSearch() == 'onde' %}
                                <img width="30" src="{{ asset('img/search.gif') }}">
                                <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                            {% else %}
                                {% if app.user.getBitcoin() >= ((app.user.getOnde() + 1) * 2300) and app.user.getOnde() < 5 and app.user.getSearchAt() < date %}
                                    <div>{% if ((app.user.getOnde() + 1) * app.user.getTimeConstruct(300)) < 3600 %}{{ ((app.user.getOnde() + 1) * app.user.getTimeConstruct(300))|date('i:s') }}{% elseif ((app.user.getOnde() + 1) * app.user.getTimeConstruct(300)) < 86400 %}{{ ((app.user.getOnde() + 1) * app.user.getTimeConstruct(300)- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getOnde() + 1) * app.user.getTimeConstruct(300)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                    <a class="btn btn-lg btn-start" href="{{ path('research_onde', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                {% else %}
                                    <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    {% endif %}
                </tr>
                <tr class="{% if app.user.getHyperespace() == 1 %}finish-search{% else %}access-search{% endif %}">
                    <th class="tab-cells-name">
                        <img class="float-left building-img ml-3" src="{{ asset('img/hyper.png') }}">{% if app.user.getHyperespace() == false %}<button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.hyper'|trans|raw }}">{{ 'title.hyperespace'|trans|raw }} - {{ 'research.canBe'|trans }}</button>{% else %}{{ 'title.hyperespace'|trans|raw }} - <span class="text-vert">{{ 'research.Activated'|trans }}</span>{% endif %}
                        {% if app.user.getHyperespace() == 0 %}<div class="mt-4">{% if 25000000 > app.user.getBitcoin() %}<span class="text-rouge">25.000.000</span>{% else %}25.000.000{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                    </th>
                    {% if app.user.getHyperespace() == 1 %}
                        <td colspan="2" width="101px" class="center-cells cell-middle">
                            <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                        </td>
                    {% else %}
                        <td class="center-cells cell-middle">
                            {{ 'research.hyperespace.desc'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            {% if app.user.getSearch() == 'hyperespace' %}
                                <img width="30" src="{{ asset('img/search.gif') }}">
                                <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                            {% else %}
                                {% if app.user.getBitcoin() >= 25000000 and app.user.getHyperespace() == false and app.user.getSearchAt() < date %}
                                    <div>{{  ((app.user.getHyperespace() + 1) * app.user.getTimeConstruct(6048)- 3600)|date('d H:i:s') }}</div>
                                    <a class="btn btn-lg btn-start" href="{{ path('research_hyperespace', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                {% else %}
                                    <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    {% endif %}
                </tr>
                </tbody>
            </table>
            <div class="block-title mt-5 ml-4"><h2>{{ 'research.titleEco'|trans }}</h2></div>
            <table class="table table-striped table-bordered table-dark text-center">
                <tbody>
                <tr class="{% if app.user.getDemography() == 5 %}finish-search{% else %}access-search-2{% endif %}">
                    <th class="tab-cells-name">
                        <img class="float-left building-img ml-3" src="{{ asset('img/urbain.png') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.demography'|trans|raw }}">{{ 'title.demography'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getDemography()|trans }} / 5</button>
                        {% if app.user.getDemography() != 5 %}<div class="mt-4">{% if (app.user.getDemography() + 1) * 8000 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getDemography() + 1) * 8000)|number_format }}</span>{% else %}{{ ((app.user.getDemography() + 1) * 8000)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                    </th>
                    {% if app.user.getDemography() == 5 %}
                        <td colspan="2" width="101px" class="center-cells cell-middle">
                            <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                        </td>
                    {% else %}
                        <td class="center-cells cell-middle">
                            {{ 'research.demography.desc'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            {% if app.user.getSearch() == 'demography' %}
                                <img width="30" src="{{ asset('img/search.gif') }}">
                                <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                            {% else %}
                                {% if app.user.getBitcoin() >= ((app.user.getDemography() + 1) * 8000) and app.user.getDemography() < 5 and app.user.getSearchAt() < date %}
                                    <div>{% if ((app.user.getDemography() + 1) * app.user.getTimeConstruct(480)) < 3600 %}{{ ((app.user.getDemography() + 1) * app.user.getTimeConstruct(480))|date('i:s') }}{% elseif ((app.user.getDemography() + 1) * app.user.getTimeConstruct(480)) < 86400 %}{{  ((app.user.getDemography() + 1) * app.user.getTimeConstruct(480)- 3600)|date('H:i:s') }}{% else %}{{  ((app.user.getDemography() + 1) * app.user.getTimeConstruct(480)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                    <a class="btn btn-lg btn-start" href="{{ path('research_demography', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                {% else %}
                                    <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    {% endif %}
                </tr>
                {% if app.user.getDemography() <= 0 %}
                    <tr class="blocked-search">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" width="40" src="{{ asset('img/military.png') }}"><button class="text-orange mt-3" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.discipline'|trans|raw }}">{{ 'title.discipline'|trans|raw }}</button>
                        </th>
                        <td class="center-cells cell-middle">
                            {{ 'research.discipline.blocked'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                        </td>
                    </tr>
                {% else %}
                    <tr class="{% if app.user.getDiscipline() == 3 %}finish-search{% else %}access-search{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/military.png') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.discipline'|trans|raw }}">{{ 'title.discipline'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getDiscipline()|trans }} / 3</button>
                            {% if app.user.getDiscipline() != 3 %}<div class="mt-4">{% if (app.user.getDiscipline() + 1) * 11700 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getDiscipline() + 1) * 11700)|number_format }}</span>{% else %}{{ ((app.user.getDiscipline() + 1) * 11700)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getDiscipline() == 3 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.discipline.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'discipline' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getBitcoin() >= ((app.user.getDiscipline() + 1) * 11700) and app.user.getDemography() > 0 and app.user.getDiscipline() < 3 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getDiscipline() + 1) * app.user.getTimeConstruct(930)) < 3600 %}{{ ((app.user.getDiscipline() + 1) * app.user.getTimeConstruct(930))|date('i:s') }}{% elseif ((app.user.getDiscipline() + 1) * app.user.getTimeConstruct(930)) < 86400 %}{{  ((app.user.getDiscipline() + 1) * app.user.getTimeConstruct(930)- 3600)|date('H:i:s') }}{% else %}{{  ((app.user.getDiscipline() + 1) * app.user.getTimeConstruct(930)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_discipline', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endif %}
                {% if app.user.getDiscipline() != 3 %}
                    <tr class="blocked-search">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" width="40" src="{{ asset('img/barbed.jpg') }}"><button class="text-orange mt-3" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.barbed'|trans|raw }}">{{ 'title.barbed'|trans|raw }}</button>
                        </th>
                        <td class="center-cells cell-middle">
                            {{ 'research.barbed.blocked'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                        </td>
                    </tr>
                {% else %}
                    <tr class="{% if app.user.getBarbed() == 5 %}finish-search{% else %}access-search-2{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/barbed.jpg') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.barbed'|trans|raw }}">{{ 'title.barbed'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getBarbed()|trans }} / 5</button>
                            {% if app.user.getBarbed() != 5 %}<div class="mt-4">{% if (app.user.getBarbed() + 1) * 200000 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getBarbed() + 1) * 200000)|number_format }}</span>{% else %}{{ ((app.user.getBarbed() + 1) * 200000)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getBarbed() == 5 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.barbed.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'barbed' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getBitcoin() >= ((app.user.getBarbed() + 1) * 200000) and app.user.getDiscipline() == 3 and app.user.getBarbed() < 5 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getBarbed() + 1) * app.user.getTimeConstruct(1200)) < 3600 %}{{ ((app.user.getBarbed() + 1) * app.user.getTimeConstruct(1200))|date('i:s') }}{% elseif ((app.user.getBarbed() + 1) * app.user.getTimeConstruct(1200)) < 86400 %}{{  ((app.user.getBarbed() + 1) * app.user.getTimeConstruct(1200)- 3600)|date('H:i:s') }}{% else %}{{  ((app.user.getBarbed() + 1) * app.user.getTimeConstruct(1200)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_barbed', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endif %}
                {% if app.user.getDiscipline() != 3 %}
                    <tr class="blocked-search">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" width="40" src="{{ asset('img/tank.jpg') }}"><button class="text-orange mt-3" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.tank'|trans|raw }}">{{ 'title.tank'|trans|raw }}</button>
                        </th>
                        <td class="center-cells cell-middle">
                            {{ 'research.tank.blocked'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                        </td>
                    </tr>
                {% else %}
                    <tr class="{% if app.user.getTank() == 1 %}finish-search{% else %}access-search{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/tank.jpg') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.tank'|trans|raw }}">{{ 'title.tank'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getTank()|trans }} / 1</button>
                            {% if app.user.getTank() != 1 %}<div class="mt-4">{% if (app.user.getTank() + 1) * 40000 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getTank() + 1) * 40000)|number_format }}</span>{% else %}{{ ((app.user.getTank() + 1) * 40000)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getTank() == 1 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.tank.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'tank' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getBitcoin() >= ((app.user.getTank() + 1) * 40000) and app.user.getDiscipline() == 3 and app.user.getTank() < 1 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getTank() + 1) * app.user.getTimeConstruct(2000)) < 3600 %}{{ ((app.user.getTank() + 1) * app.user.getTimeConstruct(2000))|date('i:s') }}{% elseif ((app.user.getTank() + 1) * app.user.getTimeConstruct(2000)) < 86400 %}{{  ((app.user.getTank() + 1) * app.user.getTimeConstruct(2000)- 3600)|date('H:i:s') }}{% else %}{{  ((app.user.getTank() + 1) * app.user.getTimeConstruct(2000)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_tank', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endif %}
                {% if app.user.getTerraformation() <= 17 %}
                    <tr class="blocked-search">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" width="40" src="{{ asset('img/expansion.jpg') }}"><button class="text-orange mt-3" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.expansion'|trans|raw }}">{{ 'title.expansion'|trans|raw }}</button>
                        </th>
                        <td class="center-cells cell-middle">
                            {{ 'research.expansion.blocked'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                        </td>
                    </tr>
                {% else %}
                    <tr class="{% if app.user.getExpansion() == 2 %}finish-search{% else %}access-search-2{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/expansion.jpg') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.expansion'|trans|raw }}">{{ 'title.expansion'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getExpansion()|trans }} / 2</button>
                            {% if app.user.getExpansion() != 2 %}<div class="mt-4">{% if (app.user.getExpansion() + 1) * 75000 > app.user.getRank().getWarPoint() %}<span class="text-rouge">{{ ((app.user.getExpansion() + 1) * 75000)|number_format }}</span>{% else %}{{ ((app.user.getExpansion() + 1) * 75000)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'pdgImg'|trans }}" src="{{ asset('img/pdg.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getExpansion() == 2 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.expansion.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'expansion' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getRank().getWarPoint() >= ((app.user.getExpansion() + 1) * 75000) and app.user.getTerraformation() == 18 and app.user.getExpansion() < 2 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getExpansion() + 1) * app.user.getTimeConstruct(6000)) < 3600 %}{{ ((app.user.getExpansion() + 1) * app.user.getTimeConstruct(6000))|date('i:s') }}{% elseif ((app.user.getExpansion() + 1) * app.user.getTimeConstruct(6000)) < 86400 %}{{  ((app.user.getExpansion() + 1) * app.user.getTimeConstruct(6000)- 3600)|date('H:i:s') }}{% else %}{{  ((app.user.getExpansion() + 1) * app.user.getTimeConstruct(6000)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_expansion', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endif %}
                </tbody>
            </table>
            <div class="block-title mt-5 ml-4"><h2>{{ 'research.titleArm'|trans }}</h2></div>
            <table class="table table-striped table-bordered table-dark text-center">
                <tbody>
                <tr class="{% if app.user.getArmement() == 5 %}finish-search{% else %}access-search{% endif %}">
                    <th class="tab-cells-name">
                        <img class="float-left building-img ml-3" src="{{ asset('img/armement.png') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.armement'|trans|raw }}">{{ 'title.armement'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getArmement()|trans }} / 5</button>
                        {% if app.user.getArmement() != 5 %}<div class="mt-4">{% if (app.user.getArmement() + 1) * 2000 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getArmement() + 1) * 2000)|number_format }}</span>{% else %}{{ ((app.user.getArmement() + 1) * 2000)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                    </th>
                    {% if app.user.getArmement() == 5 %}
                        <td colspan="2" width="101px" class="center-cells cell-middle">
                            <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                        </td>
                    {% else %}
                        <td class="center-cells cell-middle">
                            {{ 'research.armement.desc'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            {% if app.user.getSearch() == 'armement' %}
                                <img width="30" src="{{ asset('img/search.gif') }}">
                                <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                            {% else %}
                                {% if app.user.getBitcoin() >= ((app.user.getArmement() + 1) * 2000) and app.user.getArmement() < 5 and app.user.getSearchAt() < date %}
                                    <div>{% if ((app.user.getArmement() + 1) * app.user.getTimeConstruct(370)) < 3600 %}{{ ((app.user.getArmement() + 1) * app.user.getTimeConstruct(370))|date('i:s') }}{% elseif ((app.user.getArmement() + 1) * app.user.getTimeConstruct(370)) < 86400 %}{{  ((app.user.getArmement() + 1) * app.user.getTimeConstruct(370)- 3600)|date('H:i:s') }}{% else %}{{  ((app.user.getArmement(3700) + 1) * app.user.getTimeConstruct()- 3600)|date('d H:i:s') }}{% endif %}</div>
                                    <a class="btn btn-lg btn-start" href="{{ path('research_armement', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                {% else %}
                                    <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    {% endif %}
                </tr>
                {% if app.user.getArmement() <= 0 %}
                    <tr class="blocked-search">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" width="40" src="{{ asset('img/missile.png') }}"><button class="text-orange mt-3" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.missile'|trans|raw }}">{{ 'title.missile'|trans|raw }}</button>
                        </th>
                        <td class="center-cells cell-middle">
                            {{ 'research.missile.blocked'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                        </td>
                    </tr>
                {% else %}
                    <tr class="{% if app.user.getMissile() == 3 %}finish-search{% else %}access-search-2{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/missile.png') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.missile'|trans|raw }}">{{ 'title.missile'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getMissile()|trans }} / 3</button>
                            {% if app.user.getMissile() != 3 %}<div class="mt-4">{% if (app.user.getMissile() + 1) * 2600 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getMissile() + 1) * 2600)|number_format }}</span>{% else %}{{ ((app.user.getMissile() + 1) * 2600)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getMissile() == 3 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.missile.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'missile' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getBitcoin() >= ((app.user.getMissile() + 1) * 2600) and app.user.getArmement() > 0 and app.user.getMissile() < 3 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getMissile() + 1) * app.user.getTimeConstruct(450)) < 3600 %}{{ ((app.user.getMissile() + 1) * app.user.getTimeConstruct(450))|date('i:s') }}{% elseif ((app.user.getMissile() + 1) * app.user.getTimeConstruct(450)) < 86400 %}{{ ((app.user.getMissile() + 1) * app.user.getTimeConstruct(450)- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getMissile() + 1) * app.user.getTimeConstruct(450)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_missile', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endif %}
                {% if app.user.getArmement() <= 2 %}
                    <tr class="blocked-search">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" width="40" src="{{ asset('img/laser.png') }}"><button class="text-orange mt-3" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.laser'|trans|raw }}">{{ 'title.laser'|trans|raw }}</button>
                        </th>
                        <td class="center-cells cell-middle">
                            {{ 'research.laser.blocked'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                        </td>
                    </tr>
                {% else %}
                    <tr class="{% if app.user.getLaser() == 3 %}finish-search{% else %}access-search{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/laser.png') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.laser'|trans|raw }}">{{ 'title.laser'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getLaser()|trans }} / 3</button>
                            {% if app.user.getLaser() != 3 %}<div class="mt-4">{% if (app.user.getLaser() + 1) * 13000 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getLaser() + 1) * 13000)|number_format }}</span>{% else %}{{ ((app.user.getLaser() + 1) * 13000)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getLaser() == 3 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.laser.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'laser' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getBitcoin() >= ((app.user.getLaser() + 1) * 13000) and app.user.getArmement() > 2 and app.user.getLaser() < 3 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getLaser() + 1) * app.user.getTimeConstruct(1800)) < 3600 %}{{ ((app.user.getLaser() + 1) * app.user.getTimeConstruct(1800))|date('i:s') }}{% elseif ((app.user.getLaser() + 1) * app.user.getTimeConstruct(1800)) < 86400 %}{{ ((app.user.getLaser() + 1) * app.user.getTimeConstruct(1800)- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getLaser() + 1) * app.user.getTimeConstruct(1800)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_laser', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endif %}
                {% if app.user.getArmement() != 5 %}
                    <tr class="blocked-search">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" width="40" src="{{ asset('img/plasma.png') }}"><button class="text-orange mt-3" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.plasma'|trans|raw }}">{{ 'title.plasma'|trans|raw }}</button>
                        </th>
                        <td class="center-cells cell-middle">
                            {{ 'research.plasma.blocked'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                        </td>
                    </tr>
                {% else %}
                    <tr class="{% if app.user.getPlasma() == 3 %}finish-search{% else %}access-search-2{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/plasma.png') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.plasma'|trans|raw }}">{{ 'title.plasma'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPlasma()|trans }} / 3</button>
                            {% if app.user.getPlasma() != 3 %}<div class="mt-4">{% if (app.user.getPlasma() + 1) * 29000 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPlasma() + 1) * 29000)|number_format }}</span>{% else %}{{ ((app.user.getPlasma() + 1) * 29000)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getPlasma() == 3 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.plasma.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'plasma' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getBitcoin() >= ((app.user.getPlasma() + 1) * 29000) and app.user.getArmement() == 5 and app.user.getPlasma() < 3 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getPlasma() + 1) * app.user.getTimeConstruct(4680)) < 86400 %}{{ ((app.user.getPlasma() + 1) * app.user.getTimeConstruct(4680)- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPlasma() + 1) * app.user.getTimeConstruct(4680)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_plasma', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endif %}
                </tbody>
            </table>
            <div class="block-title mt-5 ml-4"><h2>{{ 'research.titleWar'|trans }}</h2></div>
            <table class="table table-striped table-bordered table-dark text-center">
                <tbody>
                <tr class="{% if app.user.getIndustry() == 5 %}finish-search{% else %}access-search{% endif %}">
                    <th class="tab-cells-name">
                        <img class="float-left building-img ml-3" src="{{ asset('img/industry.png') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.industry'|trans|raw }}">{{ 'title.industry'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getIndustry()|trans }} / 5</button>
                        {% if app.user.getIndustry() != 5 %}<div class="mt-4">{% if (app.user.getIndustry() + 1) * 1500 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getIndustry() + 1) * 1500)|number_format }}</span>{% else %}{{ ((app.user.getIndustry() + 1) * 1500)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                    </th>
                    {% if app.user.getIndustry() == 5 %}
                        <td colspan="2" width="101px" class="center-cells cell-middle">
                            <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                        </td>
                    {% else %}
                        <td class="center-cells cell-middle">
                            {{ 'research.industry.desc'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            {% if app.user.getSearch() == 'industry' %}
                                <img width="30" src="{{ asset('img/search.gif') }}">
                                <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                            {% else %}
                                {% if app.user.getBitcoin() >= ((app.user.getIndustry() + 1) * 1500) and app.user.getIndustry() < 5 and app.user.getSearchAt() < date %}
                                    <div>{% if ((app.user.getIndustry() + 1) * app.user.getTimeConstruct(150)) < 3600 %}{{ ((app.user.getIndustry() + 1) * app.user.getTimeConstruct(150))|date('i:s') }}{% elseif ((app.user.getIndustry() + 1) * app.user.getTimeConstruct(150)) < 86400 %}{{ ((app.user.getIndustry() + 1) * app.user.getTimeConstruct(150)- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getIndustry() + 1) * app.user.getTimeConstruct(150)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                    <a class="btn btn-lg btn-start" href="{{ path('research_industry', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                {% else %}
                                    <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    {% endif %}
                </tr>
                {% if app.user.getIndustry() <= 2 %}
                    <tr class="blocked-search">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" width="40" src="{{ asset('img/lightShip.png') }}"><button class="text-orange mt-3" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.light'|trans|raw }}">{{ 'title.lightShip'|trans|raw }}</button>
                        </th>
                        <td class="center-cells cell-middle">
                            {{ 'research.lightShip.blocked'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                        </td>
                    </tr>
                {% else %}
                    <tr class="{% if app.user.getLightShip() == 3 %}finish-search{% else %}access-search-2{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/lightShip.png') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.light'|trans|raw }}">{{ 'title.lightShip'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getLightShip()|trans }} / 3</button>
                            {% if app.user.getLightShip() != 3 %}<div class="mt-4">{% if (app.user.getLightShip() + 1) * 9000 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getLightShip() + 1) * 9000)|number_format }}</span>{% else %}{{ ((app.user.getLightShip() + 1) * 9000)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getLightShip() == 3 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.lightShip.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'lightShip' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getBitcoin() >= ((app.user.getLightShip() + 1) * 9000) and app.user.getLightShip() < 3 and app.user.getIndustry() > 2 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getLightShip() + 1) * app.user.getTimeConstruct(860)) < 3600 %}{{ ((app.user.getLightShip() + 1) * app.user.getTimeConstruct(860))|date('i:s') }}{% elseif ((app.user.getLightShip() + 1) * app.user.getTimeConstruct(860)) < 86400 %}{{ ((app.user.getLightShip() + 1) * app.user.getTimeConstruct(860)- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getLightShip() + 1) * app.user.getTimeConstruct(860)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_light_ship', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endif %}
                {% if app.user.getIndustry() != 5 %}
                    <tr class="blocked-search">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" width="40" src="{{ asset('img/heavyShip.png') }}"><button class="text-orange mt-3" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.heavy'|trans|raw }}">{{ 'title.lightShip'|trans|raw }}</button>
                        </th>
                        <td class="center-cells cell-middle">
                            {{ 'research.heavyShip.blocked'|trans }}
                        </td>
                        <td width="101px" class="center-cells cell-middle">
                            <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                        </td>
                    </tr>
                {% else %}
                    <tr class="{% if app.user.getHeavyShip() == 3 %}finish-search{% else %}access-search{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/heavyShip.png') }}"><button class="text-orange" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.heavy'|trans|raw }}">{{ 'title.heavyShip'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getHeavyShip()|trans }} / 3</button>
                            {% if app.user.getHeavyShip() != 3 %}<div class="mt-4">{% if (app.user.getHeavyShip() + 1) * 42000 > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getHeavyShip() + 1) * 42000)|number_format }}</span>{% else %}{{ ((app.user.getHeavyShip() + 1) * 42000)|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getHeavyShip() == 3 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.heavyShip.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'heavyShip' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getBitcoin() >= ((app.user.getHeavyShip() + 1) * 42000) and app.user.getHeavyShip() < 3 and app.user.getIndustry() == 5 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getHeavyShip() + 1) * app.user.getTimeConstruct(1200)) < 3600 %}{{ ((app.user.getHeavyShip() + 1) * app.user.getTimeConstruct(1200))|date('i:s') }}{% elseif ((app.user.getHeavyShip() + 1) * app.user.getTimeConstruct(1200)) < 86400 %}{{ ((app.user.getHeavyShip() + 1) * app.user.getTimeConstruct(1200)- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getHeavyShip() + 1) * app.user.getTimeConstruct(1200)- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_heavy_ship', {'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endif %}
                </tbody>
            </table>
            <div class="block-title mt-5 ml-4"><h2>{{ 'research.titleAlly'|trans }}</h2></div>
            <table class="table table-striped table-bordered table-dark text-center">
                <tbody>
                {% if app.user.getAlly() == null %}
                <tr class="blocked-search">
                    <th class="tab-cells-name">
                        <img class="float-left building-img ml-3" width="40" src="{{ asset('img/ally.jpg') }}"><button class="text-orange mt-3" data-toggle="popover" data-trigger="focus" title="{{ 'popover.title'|trans }}" data-html="true" data-content="{{ 'popover.ally'|trans|raw }}">{{ 'title.ally'|trans|raw }}</button>
                    </th>
                    <td class="center-cells cell-middle">
                        {{ 'research.ally.blocked'|trans }}
                    </td>
                    <td width="101px" class="center-cells cell-middle">
                        <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                    </td>
                </tr>
                {% endif %}
                {% if app.user.getAlly() and app.user.getAlly().getPolitic == 'communism' %}
                    <tr class="{% if app.user.getPoliticRecycleur() == 5 %}finish-search{% else %}access-search-2{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/recycleur_ally.jpg') }}"><button class="text-orange">{{ 'title.recycleur.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticRecycleur()|trans }} / 5</button>
                            {% if app.user.getPoliticRecycleur() != 5 %}<div class="mt-4">{% if (app.user.getPoliticRecycleur() + 1) * app.user.getResearchCost('recycleur_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticRecycleur() + 1) * app.user.getResearchCost('recycleur_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticRecycleur() + 1) * app.user.getResearchCost('recycleur_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getPoliticRecycleur() == 5 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.recycleur.ally.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'recycleur_ally' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getBitcoin() >= ((app.user.getPoliticRecycleur() + 1) * app.user.getResearchCost('recycleur_ally')) and app.user.getPoliticRecycleur() < 5 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getPoliticRecycleur() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('recycleur_ally'))) < 3600 %}{{ ((app.user.getPoliticRecycleur() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('recycleur_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticRecycleur() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('recycleur_ally'))) < 86400 %}{{ ((app.user.getPoliticRecycleur() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('recycleur_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticRecycleur() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('recycleur_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'recycleur_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                    {% if app.user.getAlly().getLevel() <= 0 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/worker_def.jpg') }}"><button class="text-orange mt-3">{{ 'title.worker.def.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.one.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticWorkerDef() == 5 %}finish-search{% else %}access-search{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/worker_def.jpg') }}"><button class="text-orange">{{ 'title.worker.def.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticWorkerDef()|trans }} / 5</button>
                                {% if app.user.getPoliticWorkerDef() != 5 %}<div class="mt-4">{% if (app.user.getPoliticWorkerDef() + 1) * app.user.getResearchCost('worker_def_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticWorkerDef() + 1) * app.user.getResearchCost('worker_def_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticWorkerDef() + 1) * app.user.getResearchCost('worker_def_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticWorkerDef() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.worker.def.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'worker_def_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticWorkerDef() + 1) * app.user.getResearchCost('worker_def_ally')) and app.user.getPoliticWorkerDef() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticWorkerDef() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('worker_def_ally'))) < 3600 %}{{ ((app.user.getPoliticWorkerDef() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('worker_def_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticWorkerDef() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('worker_def_ally'))) < 86400 %}{{ ((app.user.getPoliticWorkerDef() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('worker_def_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticWorkerDef() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('worker_def_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'worker_def_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            {% if app.user.getPoliticWorkerDef() == 5 %}
                                                <div class="text-vert">{{ 'research.finish'|trans }}</div>
                                            {% else %}
                                                <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 1 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/armement_ally.jpg') }}"><button class="text-orange mt-3">{{ 'title.armement.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.two.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticArmement() == 5 %}finish-search{% else %}access-search-2{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/armement_ally.jpg') }}"><button class="text-orange">{{ 'title.armement.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticArmement()|trans }} / 5</button>
                                {% if app.user.getPoliticArmement() != 5 %}<div class="mt-4">{% if (app.user.getPoliticArmement() + 1) * app.user.getResearchCost('armement_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticArmement() + 1) * app.user.getResearchCost('armement_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticArmement() + 1) * app.user.getResearchCost('armement_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticArmement() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.armement.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'armement_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticArmement() + 1) * app.user.getResearchCost('armement_ally')) and app.user.getPoliticArmement() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticArmement() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armement_ally'))) < 3600 %}{{ ((app.user.getPoliticArmement() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armement_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticArmement() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armement_ally'))) < 86400 %}{{ ((app.user.getPoliticArmement() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armement_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticArmement() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armement_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'armement_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 2 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/cost_soldier.jpg') }}"><button class="text-orange mt-3">{{ 'title.cost.soldier.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.three.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticCostSoldier() == 5 %}finish-search{% else %}access-search{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/cost_soldier.jpg') }}"><button class="text-orange">{{ 'title.cost.soldier.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticCostSoldier()|trans }} / 5</button>
                                {% if app.user.getPoliticCostSoldier() != 5 %}<div class="mt-4">{% if (app.user.getPoliticCostSoldier() + 1) * app.user.getResearchCost('cost_soldier_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticCostSoldier() + 1) * app.user.getResearchCost('cost_soldier_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticCostSoldier() + 1) * app.user.getResearchCost('cost_soldier_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticCostSoldier() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.cost.soldier.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'cost_soldier_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticCostSoldier() + 1) * app.user.getResearchCost('cost_soldier_ally')) and app.user.getPoliticCostSoldier() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticCostSoldier() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_soldier_ally'))) < 3600 %}{{ ((app.user.getPoliticCostSoldier() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_soldier_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticCostSoldier() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_soldier_ally'))) < 86400 %}{{ ((app.user.getPoliticCostSoldier() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_soldier_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticCostSoldier() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_soldier_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'cost_soldier_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 3 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/soldier_sale.jpg') }}"><button class="text-orange mt-3">{{ 'title.soldier.sale.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.four.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticSoldierSale() == 5 %}finish-search{% else %}access-search-2{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/soldier_sale.jpg') }}"><button class="text-orange">{{ 'title.soldier.sale.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticSoldierSale()|trans }} / 5</button>
                                {% if app.user.getPoliticSoldierSale() != 5 %}<div class="mt-4">{% if (app.user.getPoliticSoldierSale() + 1) * app.user.getResearchCost('soldier_sale_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticSoldierSale() + 1) * app.user.getResearchCost('soldier_sale_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticSoldierSale() + 1) * app.user.getResearchCost('soldier_sale_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticSoldierSale() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.soldier.sale.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'soldier_sale_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticSoldierSale() + 1) * app.user.getResearchCost('soldier_sale_ally')) and app.user.getPoliticSoldierSale() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticSoldierSale() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('soldier_sale_ally'))) < 3600 %}{{ ((app.user.getPoliticSoldierSale() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('soldier_sale_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticSoldierSale() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('soldier_sale_ally'))) < 86400 %}{{ ((app.user.getPoliticSoldierSale() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('soldier_sale_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticSoldierSale() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('soldier_sale_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'soldier_sale_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            {% if app.user.getPoliticSoldierSale() == 5 %}
                                                <div class="text-vert">{{ 'research.finish'|trans }}</div>
                                            {% else %}
                                                <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 4 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/invade_ally.png') }}"><button class="text-orange mt-3">{{ 'title.invade.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.five.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticInvade() == 5 %}finish-search{% else %}access-search{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/invade_ally.png') }}"><button class="text-orange">{{ 'title.invade.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticInvade()|trans }} / 5</button>
                                {% if app.user.getPoliticInvade() != 5 %}<div class="mt-4">{% if (app.user.getPoliticInvade() + 1) * app.user.getResearchCost('invade_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticInvade() + 1) * app.user.getResearchCost('invade_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticInvade() + 1) * app.user.getResearchCost('invade_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticInvade() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.invade.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'invade_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticInvade() + 1) * app.user.getResearchCost('invade_ally')) and app.user.getPoliticInvade() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticInvade() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('invade_ally'))) < 3600 %}{{ ((app.user.getPoliticInvade() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('invade_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticInvade() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('invade_ally'))) < 86400 %}{{ ((app.user.getPoliticInvade() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('invade_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticInvade() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('invade_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'invade_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                                <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 5 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/pdg_ally.png') }}"><button class="text-orange mt-3">{{ 'title.pdg.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.six.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticPdg() == 5 %}finish-search{% else %}access-search-2{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/pdg_ally.png') }}"><button class="text-orange">{{ 'title.pdg.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticPdg()|trans }} / 5</button>
                                {% if app.user.getPoliticPdg() != 5 %}<div class="mt-4">{% if (app.user.getPoliticPdg() + 1) * app.user.getResearchCost('pdg_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticPdg() + 1) * app.user.getResearchCost('pdg_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticPdg() + 1) * app.user.getResearchCost('pdg_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticPdg() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.pdg.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'pdg_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticPdg() + 1) * app.user.getResearchCost('pdg_ally')) and app.user.getPoliticPdg() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticPdg() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('pdg_ally'))) < 3600 %}{{ ((app.user.getPoliticPdg() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('pdg_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticPdg() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('pdg_ally'))) < 86400 %}{{ ((app.user.getPoliticPdg() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('pdg_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticPdg() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('pdg_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'pdg_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                {% endif %}
                {% if app.user.getAlly() and app.user.getAlly().getPolitic == 'fascism' %}
                    <tr class="{% if app.user.getPoliticWorker() == 5 %}finish-search{% else %}access-search{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/worker_ally.jpg') }}"><button class="text-orange">{{ 'title.worker.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticWorker()|trans }} / 5</button>
                            {% if app.user.getPoliticWorker() != 5 %}<div class="mt-4">{% if (app.user.getPoliticWorker() + 1) * app.user.getResearchCost('worker_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticWorker() + 1) * app.user.getResearchCost('worker_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticWorker() + 1) * app.user.getResearchCost('worker_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getPoliticWorker() == 5 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.worker.ally.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'worker_ally' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getBitcoin() >= ((app.user.getPoliticWorker() + 1) * app.user.getResearchCost('worker_ally')) and app.user.getPoliticWorker() < 5 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getPoliticWorker() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('worker_ally'))) < 3600 %}{{ ((app.user.getPoliticWorker() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('worker_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticWorker() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('worker_ally'))) < 86400 %}{{ ((app.user.getPoliticWorker() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('worker_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticWorker() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('worker_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'worker_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                    {% if app.user.getAlly().getLevel() <= 0 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/armement_ally.jpg') }}"><button class="text-orange mt-3">{{ 'title.armement.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.one.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticArmement() == 5 %}finish-search{% else %}access-search-2{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/armement_ally.jpg') }}"><button class="text-orange">{{ 'title.armement.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticArmement()|trans }} / 5</button>
                                {% if app.user.getPoliticArmement() != 5 %}<div class="mt-4">{% if (app.user.getPoliticArmement() + 1) * app.user.getResearchCost('armement_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticArmement() + 1) * app.user.getResearchCost('armement_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticArmement() + 1) * app.user.getResearchCost('armement_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticArmement() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.armement.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'armement_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticArmement() + 1) * app.user.getResearchCost('armement_ally')) and app.user.getPoliticArmement() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticArmement() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armement_ally'))) < 3600 %}{{ ((app.user.getPoliticArmement() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armement_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticArmement() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armement_ally'))) < 86400 %}{{ ((app.user.getPoliticArmement() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armement_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticArmement() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armement_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'armement_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 1 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/barge_ally.jpg') }}"><button class="text-orange mt-3">{{ 'title.barge.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.two.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticBarge() == 5 %}finish-search{% else %}access-search{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/barge_ally.jpg') }}"><button class="text-orange">{{ 'title.barge.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticTankDef()|trans }} / 5</button>
                                {% if app.user.getPoliticBarge() != 5 %}<div class="mt-4">{% if (app.user.getPoliticBarge() + 1) * app.user.getResearchCost('barge_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticBarge() + 1) * app.user.getResearchCost('barge_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticBarge() + 1) * app.user.getResearchCost('barge_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticBarge() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.barge.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'barge_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticBarge() + 1) * app.user.getResearchCost('barge_ally')) and app.user.getPoliticBarge() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticBarge() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('barge_ally'))) < 3600 %}{{ ((app.user.getPoliticBarge() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('barge_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticBarge() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('barge_ally'))) < 86400 %}{{ ((app.user.getPoliticBarge() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('barge_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticBarge() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('barge_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'barge_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 2 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/soldier_att.jpg') }}"><button class="text-orange mt-3">{{ 'title.soldier.att.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.three.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticSoldierAtt() == 5 %}finish-search{% else %}access-search-2{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/soldier_att.jpg') }}"><button class="text-orange">{{ 'title.soldier.att.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticSoldierAtt()|trans }} / 5</button>
                                {% if app.user.getPoliticSoldierAtt() != 5 %}<div class="mt-4">{% if (app.user.getPoliticSoldierAtt() + 1) * app.user.getResearchCost('soldier_att_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticSoldierAtt() + 1) * app.user.getResearchCost('soldier_att_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticSoldierAtt() + 1) * app.user.getResearchCost('soldier_att_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticSoldierAtt() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.soldier.att.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'soldier_att_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticSoldierAtt() + 1) * app.user.getResearchCost('soldier_att_ally')) and app.user.getPoliticSoldierAtt() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticSoldierAtt() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('soldier_att_ally'))) < 3600 %}{{ ((app.user.getPoliticSoldierAtt() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('soldier_att_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticSoldierAtt() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('soldier_att_ally'))) < 86400 %}{{ ((app.user.getPoliticSoldierAtt() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('soldier_att_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticSoldierAtt() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('soldier_att_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'soldier_att_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 3 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/cost_tank.jpg') }}"><button class="text-orange mt-3">{{ 'title.cost.tank.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.four.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticCostTank() == 5 %}finish-search{% else %}access-search{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/cost_tank.jpg') }}"><button class="text-orange">{{ 'title.cost.tank.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticCostTank()|trans }} / 5</button>
                                {% if app.user.getPoliticCostTank() != 5 %}<div class="mt-4">{% if (app.user.getPoliticCostTank() + 1) * app.user.getResearchCost('cost_tank_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticCostTank() + 1) * app.user.getResearchCost('cost_tank_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticCostTank() + 1) * app.user.getResearchCost('cost_tank_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticCostTank() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.cost.tank.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'cost_tank_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticCostTank() + 1) * app.user.getResearchCost('cost_tank_ally')) and app.user.getPoliticCostTank() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticCostTank() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_tank_ally'))) < 3600 %}{{ ((app.user.getPoliticCostTank() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_tank_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticCostTank() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_tank_ally'))) < 86400 %}{{ ((app.user.getPoliticCostTank() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_tank_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticCostTank() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_tank_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'cost_tank_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 4 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/tank_def.jpeg') }}"><button class="text-orange mt-3">{{ 'title.tank.def.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.five.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticTankDef() == 5 %}finish-search{% else %}access-search-2{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/tank_def.jpeg') }}"><button class="text-orange">{{ 'title.tank.def.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticTankDef()|trans }} / 5</button>
                                {% if app.user.getPoliticTankDef() != 5 %}<div class="mt-4">{% if (app.user.getPoliticTankDef() + 1) * app.user.getResearchCost('tank_def_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticTankDef() + 1) * app.user.getResearchCost('tank_def_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticTankDef() + 1) * app.user.getResearchCost('tank_def_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticTankDef() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.tank.def.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'tank_def_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticTankDef() + 1) * app.user.getResearchCost('tank_def_ally')) and app.user.getPoliticTankDef() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticTankDef() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('tank_def_ally'))) < 3600 %}{{ ((app.user.getPoliticTankDef() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('tank_def_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticTankDef() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('tank_def_ally'))) < 86400 %}{{ ((app.user.getPoliticTankDef() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('tank_def_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticTankDef() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('tank_def_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'tank_def_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 5 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/invade_ally.png') }}"><button class="text-orange mt-3">{{ 'title.invade.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.six.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticInvade() == 5 %}finish-search{% else %}access-search{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/invade_ally.png') }}"><button class="text-orange">{{ 'title.invade.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticInvade()|trans }} / 5</button>
                                {% if app.user.getPoliticInvade() != 5 %}<div class="mt-4">{% if (app.user.getPoliticInvade() + 1) * app.user.getResearchCost('invade_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticInvade() + 1) * app.user.getResearchCost('invade_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticInvade() + 1) * app.user.getResearchCost('invade_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticInvade() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.invade.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'invade_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticInvade() + 1) * app.user.getResearchCost('invade_ally')) and app.user.getPoliticInvade() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticInvade() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('invade_ally'))) < 3600 %}{{ ((app.user.getPoliticInvade() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('invade_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticInvade() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('invade_ally'))) < 86400 %}{{ ((app.user.getPoliticInvade() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('invade_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticInvade() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('invade_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'invade_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                {% endif %}
                {% if app.user.getAlly() and app.user.getAlly().getPolitic == 'democrat' %}
                    <tr class="{% if app.user.getPoliticProd() == 5 %}finish-search{% else %}access-search-2{% endif %}">
                        <th class="tab-cells-name">
                            <img class="float-left building-img ml-3" src="{{ asset('img/prod_ally.jpg') }}"><button class="text-orange">{{ 'title.prod.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticProd()|trans }} / 5</button>
                            {% if app.user.getPoliticProd() != 5 %}<div class="mt-4">{% if (app.user.getPoliticProd() + 1) * app.user.getResearchCost('prod_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticProd() + 1) * app.user.getResearchCost('prod_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticProd() + 1) * app.user.getResearchCost('prod_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                        </th>
                        {% if app.user.getPoliticProd() == 5 %}
                            <td colspan="2" width="101px" class="center-cells cell-middle">
                                <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                            </td>
                        {% else %}
                            <td class="center-cells cell-middle">
                                {{ 'research.prod.ally.desc'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                {% if app.user.getSearch() == 'prod_ally' %}
                                    <img width="30" src="{{ asset('img/search.gif') }}">
                                    <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                {% else %}
                                    {% if app.user.getBitcoin() >= ((app.user.getPoliticProd() + 1) * app.user.getResearchCost('prod_ally')) and app.user.getPoliticProd() < 5 and app.user.getSearchAt() < date %}
                                        <div>{% if ((app.user.getPoliticProd() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('prod_ally'))) < 3600 %}{{ ((app.user.getPoliticProd() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('prod_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticProd() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('prod_ally'))) < 86400 %}{{ ((app.user.getPoliticProd() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('prod_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticProd() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('prod_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                        <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'prod_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                    {% else %}
                                        <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                    {% if app.user.getAlly().getLevel() <= 0 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/search_ally.jpg') }}"><button class="text-orange mt-3">{{ 'title.search.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.one.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticSearch() == 5 %}finish-search{% else %}access-search{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/search_ally.jpg') }}"><button class="text-orange">{{ 'title.search.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticSearch()|trans }} / 5</button>
                                {% if app.user.getPoliticSearch() != 5 %}<div class="mt-4">{% if (app.user.getPoliticSearch() + 1) * app.user.getResearchCost('search_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticSearch() + 1) * app.user.getResearchCost('search_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticSearch() + 1) * app.user.getResearchCost('search_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticSearch() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.search.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'search_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticSearch() + 1) * app.user.getResearchCost('search_ally')) and app.user.getPoliticSearch() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticSearch() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('search_ally'))) < 3600 %}{{ ((app.user.getPoliticSearch() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('search_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticSearch() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('search_ally'))) < 86400 %}{{ ((app.user.getPoliticSearch() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('search_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticSearch() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('search_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'search_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 1 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/cost_scientist.jpg') }}"><button class="text-orange mt-3">{{ 'title.cost.scientist.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.two.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticCostScientist() == 5 %}finish-search{% else %}access-search-2{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/cost_scientist.jpg') }}"><button class="text-orange">{{ 'title.cost.scientist.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticCostScientist()|trans }} / 5</button>
                                {% if app.user.getPoliticCostScientist() != 5 %}<div class="mt-4">{% if (app.user.getPoliticCostScientist() + 1) * app.user.getResearchCost('cost_scientist_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticCostScientist() + 1) * app.user.getResearchCost('cost_scientist_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticCostScientist() + 1) * app.user.getResearchCost('cost_scientist_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticCostScientist() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.cost.scientist.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'cost_scientist_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticCostScientist() + 1) * app.user.getResearchCost('cost_scientist_ally')) and app.user.getPoliticCostScientist() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticCostScientist() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_scientist_ally'))) < 3600 %}{{ ((app.user.getPoliticCostScientist() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_scientist_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticCostScientist() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_scientist_ally'))) < 86400 %}{{ ((app.user.getPoliticCostScientist() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_scientist_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticCostScientist() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cost_scientist_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'cost_scientist_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 2 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/cargo_ally.png') }}"><button class="text-orange mt-3">{{ 'title.cargo.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.three.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticCargo() == 5 %}finish-search{% else %}access-search{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/cargo_ally.png') }}"><button class="text-orange">{{ 'title.cargo.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticCargo()|trans }} / 5</button>
                                {% if app.user.getPoliticCargo() != 5 %}<div class="mt-4">{% if (app.user.getPoliticCargo() + 1) * app.user.getResearchCost('cargo_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticCargo() + 1) * app.user.getResearchCost('cargo_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticCargo() + 1) * app.user.getResearchCost('cargo_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticCargo() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.cargo.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'cargo_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticCargo() + 1) * app.user.getResearchCost('cargo_ally')) and app.user.getPoliticCargo() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticCargo() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cargo_ally'))) < 3600 %}{{ ((app.user.getPoliticCargo() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cargo_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticCargo() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cargo_ally'))) < 86400 %}{{ ((app.user.getPoliticCargo() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cargo_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticCargo() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('cargo_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'cargo_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 3 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/armor_ally.jpg') }}"><button class="text-orange mt-3">{{ 'title.armor.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.four.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticArmor() == 5 %}finish-search{% else %}access-search-2{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/armor_ally.jpg') }}"><button class="text-orange">{{ 'title.armor.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticArmor()|trans }} / 5</button>
                                {% if app.user.getPoliticArmor() != 5 %}<div class="mt-4">{% if (app.user.getPoliticArmor() + 1) * app.user.getResearchCost('armor_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticArmor() + 1) * app.user.getResearchCost('armor_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticArmor() + 1) * app.user.getResearchCost('armor_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticArmor() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.armor.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'armor_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticArmor() + 1) * app.user.getResearchCost('armor_ally')) and app.user.getPoliticArmor() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticArmor() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armor_ally'))) < 3600 %}{{ ((app.user.getPoliticArmor() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armor_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticArmor() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armor_ally'))) < 86400 %}{{ ((app.user.getPoliticArmor() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armor_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticArmor() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('armor_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'armor_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 4 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/merchant_ally.png') }}"><button class="text-orange mt-3">{{ 'title.merchant.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.five.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticMerchant() == 5 %}finish-search{% else %}access-search{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/merchant_ally.png') }}"><button class="text-orange">{{ 'title.merchant.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticMerchant()|trans }} / 5</button>
                                {% if app.user.getPoliticMerchant() != 5 %}<div class="mt-4">{% if (app.user.getPoliticMerchant() + 1) * app.user.getResearchCost('merchant_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticMerchant() + 1) * app.user.getResearchCost('merchant_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticMerchant() + 1) * app.user.getResearchCost('merchant_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticMerchant() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.merchant.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'merchant_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticMerchant() + 1) * app.user.getResearchCost('merchant_ally')) and app.user.getPoliticMerchant() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticMerchant() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('merchant_ally'))) < 3600 %}{{ ((app.user.getPoliticMerchant() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('merchant_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticMerchant() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('merchant_ally'))) < 86400 %}{{ ((app.user.getPoliticMerchant() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('merchant_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticMerchant() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('merchant_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'merchant_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                    {% if app.user.getAlly().getLevel() <= 5 %}
                        <tr class="blocked-search">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" width="40" src="{{ asset('img/colonisation_ally.png') }}"><button class="text-orange mt-3">{{ 'title.colonisation.ally'|trans|raw }}</button>
                            </th>
                            <td class="center-cells cell-middle">
                                {{ 'research.six.ally.blocked'|trans }}
                            </td>
                            <td width="101px" class="center-cells cell-middle">
                                <span class="text-rouge">{{ 'research.blocked'|trans }}</span>
                            </td>
                        </tr>
                    {% else %}
                        <tr class="{% if app.user.getPoliticColonisation() == 5 %}finish-search{% else %}access-search-2{% endif %}">
                            <th class="tab-cells-name">
                                <img class="float-left building-img ml-3" src="{{ asset('img/colonisation_ally.png') }}"><button class="text-orange">{{ 'title.colonisation.ally'|trans|raw }} - {{ 'research.level'|trans|raw }} {{ app.user.getPoliticColonisation()|trans }} / 5</button>
                                {% if app.user.getPoliticColonisation() != 5 %}<div class="mt-4">{% if (app.user.getPoliticColonisation() + 1) * app.user.getResearchCost('colonisation_ally') > app.user.getBitcoin() %}<span class="text-rouge">{{ ((app.user.getPoliticColonisation() + 1) * app.user.getResearchCost('colonisation_ally'))|number_format }}</span>{% else %}{{ ((app.user.getPoliticColonisation() + 1) * app.user.getResearchCost('colonisation_ally'))|number_format }}{% endif %} <img data-toggle="tooltip" data-placement="bottom" title="{{ 'bitcoinImg'|trans }}" src="{{ asset('img/coin.png') }}"></div>{% endif %}
                            </th>
                            {% if app.user.getPoliticColonisation() == 5 %}
                                <td colspan="2" width="101px" class="center-cells cell-middle">
                                    <div class="text-vert text-more">{{ 'research.finish'|trans }}</div>
                                </td>
                            {% else %}
                                <td class="center-cells cell-middle">
                                    {{ 'research.colonisation.ally.desc'|trans }}
                                </td>
                                <td width="101px" class="center-cells cell-middle">
                                    {% if app.user.getSearch() == 'colonisation_ally' %}
                                        <img width="30" src="{{ asset('img/search.gif') }}">
                                        <div class="timerArea" hidden>{{ app.user.getSearchAt()|date('Y/m/d H:i:s') }}</div>

                                    {% else %}
                                        {% if app.user.getBitcoin() >= ((app.user.getPoliticColonisation() + 1) * app.user.getResearchCost('colonisation_ally')) and app.user.getPoliticColonisation() < 5 and app.user.getSearchAt() < date %}
                                            <div>{% if ((app.user.getPoliticColonisation() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('colonisation_ally'))) < 3600 %}{{ ((app.user.getPoliticColonisation() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('colonisation_ally')))|date('i:s') }}{% elseif ((app.user.getPoliticColonisation() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('colonisation_ally'))) < 86400 %}{{ ((app.user.getPoliticColonisation() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('colonisation_ally'))- 3600)|date('H:i:s') }}{% else %}{{ ((app.user.getPoliticColonisation() + 1) * app.user.getTimeConstruct(app.user.getResearchTime('colonisation_ally'))- 3600)|date('d H:i:s') }}{% endif %}</div>
                                            <a class="btn btn-lg btn-start" href="{{ path('research_ally', {'search': 'colonisation_ally', 'usePlanet': usePlanet.getId()}) }}">{{ 'research.seek'|trans }}</a>
                                        {% else %}
                                            <a class="btn btn-lg btn-secondary" disabled>{{ 'research.seek'|trans }}</a>
                                        {% endif %}
                                    {% endif %}
                                </td>
                            {% endif %}
                        </tr>
                    {% endif %}
                {% endif %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
