{% extends 'base.html.twig' %}

{% trans_default_domain 'front_fleet' %}

{% block title %}{{ 'title'|trans }}{% endblock %}

{% block body %}
    {%- block left_menu -%}
    {%- endblock -%}
    {%- block top_ressource -%}
    {%- endblock -%}
    {%- block right_planet -%}
    {%- endblock -%}
    {% if fleet.getUser() == app.user %}

        <div class="modal-header">
            <div class="block-title ml-2"><h2>{{ 'fleet.createFleet'|trans }}</h2></div>
            <button type="button" class="close plus" data-dismiss="modal">X</button>
        </div>
        <div class="p-5 createFleet">
            {{ form_start(form_manageRenameFleet,{attr: { action: path('manage_fleet', {'idp': usePlanet.getId(), 'id': fleet.getId()}) }}) }}
            <table class="table table-striped table-bordered table-dark">
                <tbody>
                <tr>
                    <td class="center-cells">
                        <div class="row">
                            <div class="offset-2 col-5">
                                {{ form_widget(form_manageRenameFleet.name) }}
                            </div>
                            <div class="col-3">
                                {{ form_widget(form_manageRenameFleet.sendForm,{attr: { class: 'btn btn-sm btn-info'}}) }}
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
            {{ form_end(form_manageRenameFleet) }}
            {{ form_start(form_manageAttackFleet,{attr: { action: path('manage_fleet', {'idp': usePlanet.getId(), 'id': fleet.getId()}) }}) }}
            <table class="table table-striped table-bordered table-dark">
                <tbody>
                <tr>
                    <th class="tab-cells-name">
                        <div class="row">
                            <div class="col-1 pt-1">
                                {{ form_widget(form_manageAttackFleet.sendForm,{attr: { hidden: 'hidden'}}) }}
                                {{ form_widget(form_manageAttackFleet.attack) }}
                            </div>
                            <div class="col-10 pt-2">
                                {{ 'fleet.attackMode'|trans }}
                            </div>
                        </div>
                    </th>
                </tr>
                </tbody>
            </table>
            {{ form_end(form_manageAttackFleet) }}
            {{ form_start(form_sendFleet,{attr: { action: path('send_fleet', {'idp': usePlanet.getId(), 'id': fleet.getId()}) }}) }}
            <div class="mb-3 text-center">
                {% if fleet.getBarge() and fleet.getPlanet().getUser() and fleet.getAllianceUser() == null %}
                    <span>
                        <h4><a class="badge badge-danger" href="{{ path('invader_planet', {'idp': usePlanet.getId(), 'fleet': fleet.getId()}) }}">
                           {{ 'fleet.invade'|trans }}
                        </a></h4>
                    </span>
                {% endif %}
                {% if fleet.getColonizer() and fleet.getPlanet().getUser() == null and fleet.getPlanet().getEmpty() == false and fleet.getPlanet().getMerchant() == false and fleet.getPlanet().getCdr() == false %}
                    <span>
                        <h4><a class="badge badge-success" href="{{ path('colonizer_planet', {'idp': usePlanet.getId(), 'fleet': fleet.getId()}) }}">
                            {{ 'fleet.colonize'|trans }}
                        </a></h4>
                    </span>
                {% endif %}
            </div>
            <table class="table table-striped table-bordered table-dark">
                <tbody>
                <tr>
                    <th class="center-cells">
                        {{ 'fleet.galaxy'|trans }}
                    </th>
                    <td class="center-cells">
                        {{ 'fleet.sector'|trans }}
                    </td>
                    <td class="center-cells">
                        {{ 'fleet.planete'|trans }}
                    </td>
                    <td class="center-cells">
                        {{ 'fleet.sendCoord'|trans }}
                    </td>
                </tr>
                <tr>
                    <td class="center-cells">
                        {% if app.user.getHyperespace() %}
                            {{ form_widget(form_sendFleet.galaxy) }}
                        {% else %}
                            {{ form_widget(form_sendFleet.galaxy,{attr: { disabled: 'disabled'}}) }}
                        {% endif %}
                    </td>
                    <td class="center-cells">
                        {{ form_widget(form_sendFleet.sector) }}
                    </td>
                    <td class="center-cells">
                        {{ form_widget(form_sendFleet.planete) }}
                    </td>
                    <td class="center-cells">
                        {{ form_widget(form_sendFleet.sendForm,{attr: { class: 'btn btn-sm btn-info'}}) }}
                    </td>
                </tr>
                </tbody>
            </table>
            {% if app.user == fleet.getPlanet().getUser() %}
                {{ form_end(form_sendFleet) }}
                {{ form_start(form_manageFleet,{attr: { action: path('manage_fleet', {'idp': usePlanet.getId(), 'id': fleet.getId()}) }}) }}
                <table class="table table-striped table-bordered table-dark">
                    <tbody>
                    <tr>
                        <th class="tab-cells-name">
                            {{ 'fleet.fleetShip'|trans }}
                        </th>
                        <td class="center-cells">
                            {{ 'fleet.addShip'|trans }}
                        </td>
                        <td class="center-cells">
                            {{ 'fleet.removeShip'|trans }}
                        </td>
                    </tr>
                    <tr{% if fleet.getPlanet().getSonde() == 0 and fleet.getSonde() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.sonde'|trans }} x {{ fleet.getSonde()|number_format }}
                        </th>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.moreSonde,{attr: { max: fleet.getPlanet().getSonde()}}) }}
                        </td>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.lessSonde,{attr: { max: fleet.getSonde()}}) }}
                        </td>
                    </tr>
                    <tr{% if fleet.getPlanet().getColonizer() == 0 and fleet.getColonizer() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.colonizer'|trans }} x {{ fleet.getColonizer()|number_format }}
                        </th>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.moreColonizer,{attr: { max: fleet.getPlanet().getColonizer()}}) }}
                        </td>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.lessColonizer,{attr: { max: fleet.getColonizer()}}) }}
                        </td>
                    </tr>
                    <tr{% if fleet.getPlanet().getRecycleur() == 0 and fleet.getRecycleur() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.recycleur'|trans }} x {{ fleet.getRecycleur()|number_format }}
                        </th>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.moreRecycleur,{attr: { max: fleet.getPlanet().getRecycleur()}}) }}
                        </td>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.lessRecycleur,{attr: { max: fleet.getRecycleur()}}) }}
                        </td>
                    </tr>
                    <tr{% if fleet.getPlanet().getHunter() == 0 and fleet.getHunter() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.hunter'|trans }} x {{ fleet.getHunter()|number_format }}
                        </th>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.moreHunter,{attr: { max: fleet.getPlanet().getHunter()}}) }}
                        </td>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.lessHunter,{attr: { max: fleet.getHunter()}}) }}
                        </td>
                    </tr>
                    <tr{% if fleet.getPlanet().getFregate() == 0 and fleet.getFregate() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.fregate'|trans }} x {{ fleet.getFregate()|number_format }}
                        </th>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.moreFregate,{attr: { max: fleet.getPlanet().getFregate()}}) }}
                        </td>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.lessFregate,{attr: { max: fleet.getFregate()}}) }}
                        </td>
                    </tr>
                    <tr{% if fleet.getPlanet().getBarge() == 0 and fleet.getBarge() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.barge'|trans }} x {{ fleet.getBarge()|number_format }}
                        </th>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.moreBarge,{attr: { max: fleet.getPlanet().getBarge()}}) }}
                        </td>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.lessBarge,{attr: { max: fleet.getBarge()}}) }}
                        </td>
                    </tr>
                    </tbody>
                </table>
                <table class="table table-striped table-bordered table-dark">
                    <tbody>
                    <tr>
                        <th class="tab-cells-name">
                            {{ 'fleet.cargo'|trans }} {{ fleet.getCargoFull()|number_format }} / {{ fleet.getCargoPlace()|number_format }}
                        </th>
                        <td class="center-cells">
                            {{ 'fleet.addShip'|trans }}
                        </td>
                        <td class="center-cells">
                            {{ 'fleet.removeShip'|trans }}
                        </td>
                    </tr>
                    <tr{% if fleet.getPlanet().getNiobium() == 0 and fleet.getNiobium() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.niobium'|trans }} = {{ fleet.getNiobium()|number_format }}
                        </th>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.moreNiobium,{attr: { max: fleet.getPlanet().getNiobium()}}) }}
                        </td>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.lessNiobium,{attr: { max: fleet.getNiobium()}}) }}
                        </td>
                    </tr>
                    <tr{% if fleet.getPlanet().getWater() == 0 and fleet.getWater() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.water'|trans }} = {{ fleet.getWater()|number_format }}
                        </th>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.moreWater,{attr: { max: fleet.getPlanet().getWater()}}) }}
                        </td>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.lessWater,{attr: { max: fleet.getWater()}}) }}
                        </td>
                    </tr>
                    <tr{% if fleet.getPlanet().getSoldier() == 0 and fleet.getSoldier() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.soldier'|trans }} = {{ fleet.getSoldier()|number_format }}
                        </th>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.moreSoldier,{attr: { max: fleet.getPlanet().getSoldier()}}) }}
                        </td>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.lessSoldier,{attr: { max: fleet.getSoldier()}}) }}
                        </td>
                    </tr>
                    <tr{% if fleet.getPlanet().getWorker() == 0 and fleet.getWorker() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.worker'|trans }} = {{ fleet.getWorker()|number_format }}
                        </th>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.moreWorker,{attr: { max: fleet.getPlanet().getWorker()}}) }}
                        </td>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.lessWorker,{attr: { max: fleet.getWorker()}}) }}
                        </td>
                    </tr>
                    <tr{% if fleet.getPlanet().getScientist() == 0 and fleet.getScientist() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.scientist'|trans }} x {{ fleet.getScientist()|number_format }}
                        </th>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.moreScientist,{attr: { max: fleet.getPlanet().getScientist()}}) }}
                        </td>
                        <td class="center-cells">
                            {{ form_widget(form_manageFleet.lessScientist,{attr: { max: fleet.getScientist()}}) }}
                        </td>
                    </tr>
                    </tbody>
                </table>
                {{ form_widget(form_manageFleet.sendForm,{attr: { class: 'btn btn-lg btn-info float-right'}}) }}
                {{ form_end(form_manageFleet) }}
            {% else %}
                <table class="table table-striped table-bordered table-dark">
                    <tbody>
                    <tr>
                        <th class="tab-cells-name">
                            {{ 'fleet.fleetShip'|trans }}
                        </th>
                    </tr>
                    <tr{% if fleet.getSonde() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.sonde'|trans }} x {{ fleet.getSonde()|number_format }}
                        </th>
                    <tr{% if fleet.getColonizer() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.colonizer'|trans }} x {{ fleet.getColonizer()|number_format }}
                        </th>
                    <tr{% if fleet.getRecycleur() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.recycleur'|trans }} x {{ fleet.getRecycleur()|number_format }}
                        </th>
                    <tr{% if fleet.getHunter() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.hunter'|trans }} x {{ fleet.getHunter()|number_format }}
                        </th>
                    <tr{% if fleet.getFregate() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.fregate'|trans }} x {{ fleet.getFregate()|number_format }}
                        </th>
                    </tr>
                    <tr{% if fleet.getBarge() == 0 %} hidden{% endif %}>
                        <th class="tab-cells-name">
                            {{ 'fleet.barge'|trans }} x {{ fleet.getBarge()|number_format }}
                        </th>
                    </tr>
                    </tbody>
                </table>
                {% if fleet.getCargoPlace() > 0 %}
                    <table class="table table-striped table-bordered table-dark">
                        <tbody>
                        <tr>
                            <th class="tab-cells-name">
                                {{ 'fleet.cargo'|trans }} {{ fleet.getCargoFull()|number_format }} / {{ fleet.getCargoPlace()|number_format }}
                            </th>
                        </tr>
                        <tr{% if fleet.getNiobium() == 0 %} hidden{% endif %}>
                            <th class="tab-cells-name">
                                {{ 'fleet.niobium'|trans }} x {{ fleet.getNiobium()|number_format }} <span class="float-right"><a href="{{ path('discharge_fleet_niobium', {'idp': usePlanet.getId(), 'id': fleet.getId() }) }}">{{ 'fleet.discharge'|trans }}</a></span>
                            </th>
                        <tr{% if fleet.getWater() == 0 %} hidden{% endif %}>
                            <th class="tab-cells-name">
                                {{ 'fleet.water'|trans }} x {{ fleet.getWater()|number_format }} <span class="float-right"><a href="{{ path('discharge_fleet_water', {'idp': usePlanet.getId(), 'id': fleet.getId() }) }}">{{ 'fleet.discharge'|trans }}</a></span>
                            </th>
                        <tr{% if fleet.getSoldier() == 0 %} hidden{% endif %}>
                            <th class="tab-cells-name">
                                {{ 'fleet.soldier'|trans }} x {{ fleet.getSoldier()|number_format }} <span class="float-right"><a href="{{ path('discharge_fleet_soldier', {'idp': usePlanet.getId(), 'id': fleet.getId() }) }}">{{ 'fleet.discharge'|trans }}</a></span>
                            </th>
                        <tr{% if fleet.getWorker() == 0 %} hidden{% endif %}>
                            <th class="tab-cells-name">
                                {{ 'fleet.worker'|trans }} x {{ fleet.getWorker()|number_format }} <span class="float-right"><a href="{{ path('discharge_fleet_worker', {'idp': usePlanet.getId(), 'id': fleet.getId() }) }}">{{ 'fleet.discharge'|trans }}</a></span>
                            </th>
                        <tr{% if fleet.getScientist() == 0 %} hidden{% endif %}>
                            <th class="tab-cells-name">
                                {{ 'fleet.scientist'|trans }} x {{ fleet.getScientist()|number_format }} <span class="float-right"><a href="{{ path('discharge_fleet_scientist', {'idp': usePlanet.getId(), 'id': fleet.getId() }) }}">{{ 'fleet.discharge'|trans }}</a></span>
                            </th>
                        </tr>
                        </tbody>
                    </table>
                {% endif %}
            {% endif %}
            {{ form_end(form_sendFleet) }}
        </div>
    {% endif %}
{% endblock %}
